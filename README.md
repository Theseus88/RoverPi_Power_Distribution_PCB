# **RoverPi Power Distribution PCB**

# **Safety Disclaimer**

**Always exercise caution when working with electronics.**

- **Risk of Electrical Shock:** Improper handling of electrical components can lead to serious injury or death.
- **Heat Dissipation:** Ensure that components, especially those generating heat (like voltage regulators), are adequately cooled to prevent overheating and potential fires.
- **Battery Safety:** Handle and charge batteries according to manufacturer's instructions. Avoid overcharging, over-discharging, or short-circuiting batteries.
- **Power Supply:** Use a reliable power supply suitable for your project. Avoid overloading circuits.

**It is recommended to seek guidance from experienced individuals or consult relevant safety standards before undertaking any electronics project.**

# **Schematic**

<div style="text-align: center;">
    <img src="RoverPi Power Distribution PCB Schematic.svg" style="width: 650px; height: auto;" alt="RoverPi Power Distribution PCB Schematic" title="RoverPi Power Distribution PCB Schematic">
</div>

# **Bill Of Materials**

- **(1) RoverPi Power Distribution PCB**
    - PCBWay Part #: W690569AS1F3
- **(1) 2 Position Wire to Board Terminal Block Horizontal w/ Board 0.197" (5.00mm) Through Hole**
    - DigiKey Part #: [283-EM290502-ND](https://www.digikey.com/en/products/detail/eaton-electronics-division/EM290502/16576375 "DigiKey.com")
    - MFR Part #: EM290502
- **(1) 3 Position Wire to Board Terminal Block Horizontal w/ Board 0.197" (5.00mm) Through Hole**
    - DigiKey Part #: [283-EM290503-ND](https://www.digikey.com/en/products/detail/eaton-electronics-division/EM290503/3525891 "DigiKey.com")
    - MFR Part #: EM290503
- **(5) 2 Position Wire to Board Terminal Block Horizontal w/ Board 0.197" (5.00mm) Through Hole**
    - DigiKey Part #: [A97996-ND](https://www.digikey.com/en/products/detail/te-connectivity-amp-connectors/1776244-2/1826859 "DigiKey.com")
    - MFR Part #: 1776244-2
- **(1) Connector Header Through Hole 3 position 0.100" (2.54mm)**
    - DigiKey Part #: [952-2263-ND](https://www.digikey.com/en/products/detail/harwin-inc/M20-9990345/3728227 "DigiKey.com")
    - MFR Part #: M20-9990345
- **(1) 2 (1 x 2) Position Shunt Connector Black Open Top 0.100" (2.54mm) Gold**
    - DigiKey Part #: [952-2881-ND](https://www.digikey.com/en/products/detail/harwin-inc/M7582-05/3922850 "DigiKey.com")
    - MFR Part #: M7582-05
- **(1) Bipolar (BJT) Transistor NPN 45 V 800 mA 100MHz 625 mW Through Hole TO-92-3**
    - DigiKey Part #: [BC33740TACT-ND](https://www.digikey.com/en/products/detail/onsemi/BC33740TA/974180 "DigiKey.com")
    - MFR Part #: BC33740TA
- **(1) P-Channel 55 V 31A (Tc) 110W (Tc) Through Hole TO-220AB**
    - DigiKey Part #: [IRF5305PBF-ND](https://www.digikey.com/en/products/detail/infineon-technologies/IRF5305PBF/811987 "DigiKey.com")
    - MFR Part #: IRF5305PBF
- **(4) Linear Voltage Regulator IC Positive Adjustable 1 Output 3A TO-220-3**
    - DigiKey Part #: [LM350TNS/NOPB-ND](https://www.digikey.com/en/products/detail/texas-instruments/LM350T-NOPB/8901 "DigiKey.com")
    - MFR Part #: LM350T/NOPB
- **(5) Heat Sink TO-220 Aluminum 6.0W @ 50°C Board Level**
    - DigiKey Part #: [294-1067-ND](https://www.digikey.com/en/products/detail/cts-thermal-management-products/7-345-1PP-BA/272705 "DigiKey.com")
    - MFR Part #: 7-345-1PP-BA
- **(5) Mounting Kit For TO-220 Heat Sinks**
    - DigiKey Part #: [HS417-ND](https://www.digikey.com/en/products/detail/boyd-laconia-llc/4880G/1625654 "DigiKey.com")
    - MFR Part #: 4880G
- **(4) 120 Ohms ±1% 0.25W, 1/4W Through Hole Resistor Axial Metal Film**
    - DigiKey Part #: [MFR-25FBF52-120R-ND](https://www.digikey.com/en/products/detail/yageo/MFR-25FBF52-120R/9138050 "DigiKey.com")
    - MFR Part #: MFR-25FBF52-120R
- **(1) 374 Ohms ±1% 0.25W, 1/4W Through Hole Resistor Axial Metal Film**
    - DigiKey Part #: [374XBK-ND](https://www.digikey.com/en/products/detail/yageo/MFR-25FBF52-374R/12915 "DigiKey.com")
    - MFR Part #: MFR-25FBF52-374R
    - Adjusted Output Voltage: 5.145833 Volts
- **(3) 464 Ohms ±1% 0.25W, 1/4W Through Hole Resistor Axial Metal Film**
    - DigiKey Part #: [464XBK-ND](https://www.digikey.com/en/products/detail/yageo/MFR-25FBF52-464R/12933 "DigiKey.com")
    - MFR Part #: MFR-25FBF52-464R
    - Adjusted Output Voltage: 6.083333 Volts
- **(2) 820 Ohms ±1% 0.25W, 1/4W Through Hole Resistor Axial Metal Film**
    - DigiKey Part #: [MFR-25FBF52-820R-ND](https://www.digikey.com/en/products/detail/yageo/MFR-25FBF52-820R/9138207 "DigiKey.com")
    - MFR Part #: MFR-25FBF52-820R
- **(1) 1 kOhms ±1% 0.25W, 1/4W Through Hole Resistor Axial Metal Film**
    - DigiKey Part #: [1.00KXBK-ND](https://www.digikey.com/en/products/detail/yageo/MFR-25FBF52-1K/13011 "DigiKey.com")
    - MFR Part #: MFR-25FBF52-1K
- **(1) 10 kOhms ±1% 0.25W, 1/4W Through Hole Resistor Axial Metal Film**
    - DigiKey Part #: [10.0KXBK-ND](https://www.digikey.com/en/products/detail/yageo/MFR-25FBF52-10K/13219 "DigiKey.com")
    - MFR Part #: MFR-25FBF52-10K
- **(8) Electrolytic Decoupling Capacitors - 10μF/25V**
    - SparkFun Part #: [COM-00523](https://www.sparkfun.com/electrolytic-decoupling-capacitors-10uf-25v.html "SparkFun.com")
- **(1) LED - Basic Red 5mm**
    - SparkFun Part #: [COM-09590](https://www.sparkfun.com/led-basic-red-5mm.html "SparkFun.com")
- **(1) LED - Basic Green 5mm**
    - SparkFun Part #: [COM-09592](https://www.sparkfun.com/led-basic-green-5mm.html "SparkFun.com")

# **Additional Hardware Used In This Guide**

- **(1) Raspberry Pi 4 Model B (8 GB)**
    - SparkFun Part #: [DEV-16811](https://www.sparkfun.com/raspberry-pi-4-model-b-8-gb.html "SparkFun.com")
- **(1) Lectron Pro 7.4V 2000mAh 25C Lipo Battery with XT60 Connector**
    - Common Sense RC Part #: [2S2000-25X](https://commonsenserc.com/product_info.php?cPath=37_213&products_id=7180 "CommonSenseRC.com")
- **(1) XT60 Charging Adapter with Banana Plugs**
    - Common Sense RC Part #: [BP2XT60M](https://commonsenserc.com/product_info.php?cPath=187&products_id=4741 "CommonSenseRC.com")
- **(1) ACDC-10A 1S-6S 100W 10A Multi-Chemistry Balancing Charger (LiPo/LiFe/LiHV/NiMH)**
    - Common Sense RC Part #: [ACDC-10A](https://commonsenserc.com/product_info.php?cPath=29&products_id=7099 "CommonSenseRC.com")

# **Powering The RoverPi Power Distribution PCB**

<div style="text-align: center;">
    <img src="https://commonsenserc.com/images/2S2000-25X_1000.jpg" style="width: 320px; height: 195;" alt="Lectron Pro 7.4V 2000mAh 25C Lipo Battery with XT60 Connector" title="Lectron Pro 7.4V 2000mAh 25C Lipo Battery with XT60 Connector">
    <img src="https://commonsenserc.com/images/BP2XT60M_700.jpg" style="width: 250px; height: 195" alt="XT60 Charging Adapter with Banana Plugs" title="XT60 Charging Adapter with Banana Plugs">
</div>

In this guide, we are using a 7.4 Volt battery that, when fully charged, can output up to 8.4 Volts. We chose this battery because its voltage range is relatively close to the regulated output voltages we require from the RoverPi Power Distribution PCB, which are 5.145833 Volts and 6.083333 Volts. This proximity minimizes the voltage difference and, consequently, the heat dissipated by the LM350 voltage regulators, leading to higher efficiency.

**Knowing the input voltage range to expect for the RoverPi Power Distribution PCB is critical when assembling the PCB and choosing the correct resistor values for R1 and R4.** These resistors limit the current supplied to the RoverPi Power Distribution PCB's Indication LED's, D1 and D2, which have a forward voltage of 1.8 Volts to 2.2 Volts. Since our chosen battery can supply a voltage range of 7.4 Volts to 8.4 Volts, we need to calculate the appropriate resistor values to limit the current flowing through the LEDs.

**The formula to calculate the resistor values is:**

R = (V<sub>Supply</sub> - V<sub>LED</sub>) / I<sub>LED</sub>

**Where:**
- R is the resistance in Ohms
- V<sub>Supply</sub> is the supply voltage from the battery (7.4-8.4V)
- V<sub>LED</sub> is the forward voltage of the LED (1.8-2.2V)
- I<sub>LED</sub> is the desired current through the LED (typically a small value, e.g., 10-20mA)
 
 For this guide, we went with a desired maximum current of 7.5 mA through each of our RoverPi Power Distribution PCB's indication LEDs. A low current helps conserve battery life and prevents the LEDs from being overly bright. Therefore, we chose resistor values of 820 Ohms based on this calculation for resistors R1 and R4.

**Using A Larger Battery?**

The resistor values we calculated, 820 Ohms, are specific to the 7.4 Volt battery we chose that has a maximum voltage of 8.4 Volts. If you decide to use a battery with a higher voltage range, you will need to recalculate these resistor values using the new maximum voltage of your chosen battery. This ensures the current through the LEDs stays within the appropriate range to prevent damage and conserve battery life. Here is a helpful online [LED Series Resistor Calculator](https://www.digikey.com/en/resources/conversion-calculators/conversion-calculator-led-series-resistor "DigiKey.com") you can use to help you in choosing the right resistor values.

# **Setting The Regulated Output Voltages**

The LM350 voltage regulators are used to generate precise output voltages for the RoverPi Power Distribution PCB. This is achieved by connecting two external resistors to each regulator. The output voltage of a regulator can be roughly calculated using the following formula:

```
Output Voltage = 1.25 * (1 + R2 / R1)
```

**It's crucial to remember that the maximum output voltage of an LM350 voltage regulator must always be less than it's input voltage minus the reference voltage, 1.25 Volts, to ensure proper operation.**

In this guide, we'll be using 120 Ohm resistors for R5, R7, R9 and R11, according to the LM350's online [datasheet](https://www.ti.com/lit/ds/symlink/lm350-n.pdf). For R6, we will be using a 374 Ohm resistor to achieve an output voltage of approximately 5.145833 Volts for Supply 1, which will later be used in this guide to power a Raspberry Pi 4 Model B. For R8, R10, and R12, we chose to use 464 Ohm resistors to achieve output voltages of approximately 6.083333 Volts for Supplies 2, 3, and 4.

Need to adjust the output voltage for a different application? No problem! Check out this online [LM317/LM338/LM350 Resistor Calculator](https://circuitdigest.com/calculators/lm317-resistor-voltage-calculator "CircuitDigest.com") to explore various resistor combinations and their corresponding output voltages.

# **Warning: Heat Dissipation And The LM350 Voltage Regulators**

<div style="text-align: center;">
    <img src="https://www.jotrin.com/userfiles/images/techs/LM350%20IC.png" style="width: 500px; height: auto;" alt="LM350 3 Amp Adjustable Voltage Regulator" title="LM350 3 Amp Adjustable Voltage Regulator">
</div>

The LM350 voltage regulators are workhorses, but they do generate heat during operation. This heat dissipation is directly related to the difference between a regulator's input voltage and it's regulated output voltage. In this guide we are using a 7.4 Volt battery that, when fully charged, can output up to 8.4 Volts. This guide also sets the RoverPi Power Distribution PCB's LM350 voltage regulators to output 5.145833 Volts or 6.083333 Volts. Here's where understanding power dissipation comes into play. We can get a rough estimate of the power a LM350 voltage regulator will dissipate as heat using the following formula:

```
(Input Voltage (Volts) - Output Voltage (Volts)) x Output Current (Amps) = Power Dissipation (Watts)
```

For example, let's assume a worst-case scenario where a regulator's input voltage from our 7.4V Lipo battery is 8.4 Volts. We also need to consider when a regulator is under it's maximum current draw of 3 Amps. Here's the calculations for both of our regulated output voltages:

- ```(8.4 Volts - 5.145833 Volts) * 3 Amps = 9.762501 Watts```
- ```(8.4 Volts - 6.083333 Volts) * 3 Amps = 6.950001 Watts```

Remember, these are estimates, and the actual power dissipation may vary depending on several factors and load fluctuations. **Heat sinks are crucial in transfering the heat generated by the regulators to the surrounding environment. It's always recommended to choose a heat sink with a higher wattage capacity than your calculated value to provide a buffer for unexpected situations.**

# **Mounting Kit For TO-220 Heat Sinks**

<div style="text-align: center;">
    <img src="https://mm.digikey.com/Volume0/opasdata/d220001/medias/images/922/4880G.JPG" style="width: 250px; height: auto;" alt="Images/4880G.jpg" title="Mounting Kit For TO-220 Heat Sinks">
    <img src="https://mm.digikey.com/Volume0/opasdata/d220001/medias/images/4843/110_7-345-1PP-BA.jpg" style="width: 250px; height: auto;" alt="Images/7-345-1PP-BA.jpg" title="Heat Sink TO-220 Aluminum 6.0W @ 50°C Board Level">
</div>

Boyd Laconia, LLC's Mounting Kit For TO-220 Heat Sinks is essential for safely attaching CTS Thermal Management Products' Heat Sink TO-220 Aluminum 6.0W @ 50°C Board Level to the TO-220 components on the RoverPi Power Distribution PCB. The kit includes a low-cost polymide plastic insulating film and a polyphenylene sulfide shoulder washer to prevent short circuits by electrically isolating the heat sink assembly from the TO-220 components. Proper electrical insulation is crucial for the safe and reliable operation of the electronics.


# **Powering A Raspberry Pi 4 Model B**

<div style="text-align: center;">
    <img src="https://www.raspberrypi.com/documentation/computers/images/GPIO-Pinout-Diagram-2.png" style="width: 500px; height: auto;" alt="GPIO and the 40-pin header" title="GPIO and the 40-pin header">
</div>

While the Raspberry Pi 4 Model B offers convenient power options like USB-C and Power over Ethernet (PoE), this guide explores a more versatile approach: directly powering the Pi through it's 40-pin header. This method is ideal for mobile electronics, robotics projects, and we can use this option with the RoverPi Power Distribution PCB. According to the Raspberry Pi 4 Model B's [online datasheet](https://datasheets.raspberrypi.com/rpi4/raspberry-pi-4-datasheet.pdf "RaspberryPi.com"), the ideal voltage range falls between 4.75 volts and 5.25 volts, with an absolute maximum of 6 volts. When using the recommended [Raspberry Pi 15 Watt USB-C Power Supply](https://www.raspberrypi.com/products/type-c-power-supply/ "RaspberryPi.com") to power the Raspberry Pi 4 Model B we observed 5.18 Volts on the Pi's 5V pins. Reviewing the Pi's [online hardware schematic](https://datasheets.raspberrypi.com/rpi4/raspberry-pi-4-reduced-schematics.pdf "RaspberryPi.com") also shows us that the Pi's 5V pins are connected directly to the power supplied by the USB-C connector. This is why we chose to have one of the RoverPi Power Distribution PCB's voltage regulators set to output a voltage of 5.145833 Volts. We wanted to be as close as possible to the 5.18 Volts we observed when using the recommended Raspberry Pi 15 Watt USB-C Power Supply without going over the voltage we had observed.

# **Further Reading And Information**

- **RoverPi Power Distribution PCB Component Datasheets**
    - [EuroMag Series PCB Mount Terminal Blocks Datasheet](https://www.eaton.com/content/dam/eaton/products/electronic-components/resources/data-sheet/eaton-em2905-euromag-terminal-blocks-high-current-data-sheet.pdf)
    - [Terminal Block 2 Position Side Entry 5mm Datasheet](https://www.te.com/commerce/DocumentDelivery/DDEController?Action=srchrtrv&DocNm=1308389_EUROSTYLE_TERMINAL_BLOCKS&DocType=CS&DocLang=English)
    - [Connector Header Through Hole 3 position 0.100" (2.54mm)](https://cdn.harwin.com/pdfs/M20-999.pdf)
    - [2 (1 x 2) Position Shunt Connector Black Open Top 0.100" (2.54mm) Gold](https://cdn.harwin.com/pdfs/M7580-M7583.pdf)
    - [Bipolar (BJT) Transistor NPN 45 V 800 mA 100MHz 625 mW Through Hole TO-92-3 Datasheet](https://rocelec.widen.net/view/pdf/hcqqbqwrik/ONSM-S-A0003590550-1.pdf?t.download=true&u=5oefqw)
    - [P-Channel 55 V 31A (Tc) 110W (Tc) Through Hole TO-220AB Datasheet](https://www.infineon.com/dgdl/irf5305pbf.pdf?fileId=5546d462533600a4015355e370101993)
    - [Linear Voltage Regulator IC Positive Adjustable 1 Output 3A TO-220-3 Datasheet](https://www.ti.com/lit/ds/symlink/lm350-n.pdf)
    - [Heat Sink TO-220 Aluminum 6.0W @ 50°C Board Level Datasheet](https://mm.digikey.com/Volume0/opasdata/d220001/medias/docus/860/7-344%2C7-345.pdf)
    - [Mounting Kit For TO-220 Heat Sinks Datasheet](https://info.boydcorp.com/hubfs/Thermal/Air-Cooling/Boyd-Board-Level-Heatsinks-Catalog.pdf)
    - [Metal Film Resistors General Purpose MFR Series Datasheet](https://www.yageo.com/upload/media/product/app/datasheet/lr/yageo-mfr_datasheet.pdf)
    - [LED - Basic Red 5mm](https://cdn.sparkfun.com/assets/e/c/e/c/5/COM-09590-YSL-R531R3D-D2.pdf)
    - [LED - Basic Green 5mm](http://www.sparkfun.com/datasheets/Components/LED/COM-09592-YSL-R531K3D-D2.pdf)
- [**Raspberry Pi 4 Model B**](https://www.raspberrypi.com/products/raspberry-pi-4-model-b/ "RaspberryPi.com")
    - [Datasheet](https://datasheets.raspberrypi.com/rpi4/raspberry-pi-4-datasheet.pdf "RaspberryPi.com")
    - [Schematic](https://datasheets.raspberrypi.com/rpi4/raspberry-pi-4-reduced-schematics.pdf "RaspberryPi.com")
    - [Raspberry Pi 15 Watt USB-C Power Supply](https://www.raspberrypi.com/products/type-c-power-supply/ "RaspberryPi.com")
- **Online Calculators**
    - [LED Series Resistor Calculator](https://www.digikey.com/en/resources/conversion-calculators/conversion-calculator-led-series-resistor "DigiKey.com")
    - [LM317/LM338/LM350 Resistor Calculator](https://circuitdigest.com/calculators/lm317-resistor-voltage-calculator "CircuitDigest.com")
- [**Understandings LM350: A Comprehensive Guide to Adjustable Voltage Regulators**](https://www.jotrin.com/technology/details/lm350-voltage-regulator "jotrin.com")
